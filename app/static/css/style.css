/* =============================================================
   HQAstroCam â€“ Dark astrophotography-friendly stylesheet
   Uses deep navy background + red accents (preserves night vision)
   ============================================================= */

:root {
  --bg-deep:    #07070f;
  --bg-dark:    #0d0d1a;
  --bg-panel:   #11111f;
  --bg-card:    #181828;
  --bg-input:   #1e1e30;
  --border:     #2a2a45;
  --red:        #c0392b;
  --red-light:  #e74c3c;
  --red-dim:    #6b1e16;
  --accent:     #922b21;
  --text:       #d4cfe8;
  --text-muted: #7b7a99;
  --text-dim:   #4a4965;
  --green:      #1e8449;
  --yellow:     #b7950b;
  --radius:     6px;
  --topbar-h:   48px;
}

/* Dim mode (red-only for full night vision) */
body.dim-mode {
  filter: brightness(0.5) sepia(1) hue-rotate(-20deg) saturate(3);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  background: var(--bg-deep);
  color: var(--text);
  font-family: 'Segoe UI', system-ui, sans-serif;
  font-size: 14px;
  overflow: hidden;
}

/* ---- TOP BAR ---- */
#topbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--topbar-h);
  background: var(--bg-panel);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 14px;
  gap: 12px;
  z-index: 100;
}
.topbar-left  { display: flex; align-items: center; gap: 10px; flex: 1; }
.topbar-center { flex: 1; text-align: center; color: var(--text-muted); font-size: 12px; }
.topbar-right  { display: flex; align-items: center; gap: 6px; }
.logo { font-size: 16px; font-weight: 700; color: var(--text); letter-spacing: 0.5px; }

#rec-badge {
  background: var(--red);
  color: #fff;
  padding: 2px 8px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 700;
  animation: pulse 1.4s ease-in-out infinite;
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.4; }
}

.sep { color: var(--border); }

/* ---- MAIN LAYOUT ---- */
#main-layout {
  display: grid;
  grid-template-columns: 280px 1fr 280px;
  grid-template-rows: calc(100vh - var(--topbar-h));
  margin-top: var(--topbar-h);
  overflow: hidden;
}

/* ---- PANELS ---- */
aside {
  background: var(--bg-panel);
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 14px;
}
#files-panel {
  border-right: none;
  border-left: 1px solid var(--border);
}
aside h2 {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
}

.section-label {
  font-size: 11px;
  font-weight: 700;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.8px;
  margin-bottom: 6px;
}

/* ---- PRESETS ---- */
.preset-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
  margin-bottom: 6px;
}
.preset-btn {
  background: var(--bg-card);
  border: 1px solid var(--border);
  color: var(--text-muted);
  padding: 6px 4px;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 11px;
  text-align: center;
  transition: background 0.15s, border-color 0.15s, color 0.15s;
}
.preset-btn:hover   { background: var(--bg-input); color: var(--text); }
.preset-btn.active  { border-color: var(--red); color: var(--red-light); background: var(--red-dim); }

/* ---- CAMERA CONTROLS ---- */
.control-row {
  margin-bottom: 10px;
}
.control-row label {
  display: block;
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 3px;
}
.control-row input[type="range"],
.control-row input[type="number"],
.control-row select {
  width: 100%;
  background: var(--bg-input);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: var(--radius);
  padding: 4px 8px;
  font-size: 12px;
  outline: none;
}
.control-row input:focus,
.control-row select:focus {
  border-color: var(--red);
}
.control-val {
  float: right;
  font-size: 11px;
  color: var(--red-light);
  font-variant-numeric: tabular-nums;
}
.control-row input[type="checkbox"] {
  width: auto;
  accent-color: var(--red);
  margin-right: 6px;
}
.tuple-row { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
.tuple-row input { width: 100%; }

/* ---- PREVIEW SECTION ---- */
#preview-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  background: var(--bg-dark);
  padding: 14px;
  overflow: hidden;
}
#preview-wrapper {
  position: relative;
  flex: 1;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: #000;
}
#preview-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  display: block;
}
#preview-overlay {
  position: absolute;
  bottom: 8px;
  left: 8px;
  display: flex;
  gap: 10px;
  pointer-events: none;
}
#preview-overlay span {
  background: rgba(0,0,0,0.6);
  color: var(--red-light);
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
  font-variant-numeric: tabular-nums;
}

/* ---- CAPTURE CONTROLS ---- */
#capture-controls {
  width: 100%;
  padding-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.capture-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.checkbox-label {
  display: flex;
  align-items: center;
  font-size: 12px;
  color: var(--text-muted);
  cursor: pointer;
}
.checkbox-label input[type="checkbox"] { accent-color: var(--red); }

/* ---- CAPTURE FEEDBACK ---- */
.capture-feedback {
  border-radius: var(--radius);
  padding: 8px 12px;
  font-size: 12px;
  animation: fadein 0.3s;
}
.capture-feedback.ok  { background: #1a3a1a; color: #6fcf97; border: 1px solid #276221; }
.capture-feedback.err { background: #3a1a1a; color: #eb5757; border: 1px solid #622121; }
@keyframes fadein { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; } }

/* ---- BUTTONS ---- */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 7px 14px;
  border-radius: var(--radius);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  border: 1px solid transparent;
  transition: background 0.15s, opacity 0.15s;
  white-space: nowrap;
}
.btn:disabled { opacity: 0.4; cursor: not-allowed; }
.btn-primary  { background: var(--red);     color: #fff; border-color: var(--accent); }
.btn-primary:hover:not(:disabled)  { background: var(--red-light); }
.btn-danger   { background: #6b1e16;       color: var(--red-light); border-color: var(--red-dim); }
.btn-danger:hover:not(:disabled)   { background: var(--red);  color: #fff; }
.btn-secondary { background: var(--bg-card); color: var(--text); border-color: var(--border); }
.btn-secondary:hover:not(:disabled){ background: var(--bg-input); }
.big-btn { font-size: 14px; padding: 10px 20px; flex: 1; }
.icon-btn {
  background: transparent;
  border: none;
  font-size: 20px;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: var(--radius);
  transition: background 0.15s;
}
.icon-btn:hover { background: var(--bg-card); }

/* ---- FILE LIST ---- */
.file-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  margin-bottom: 5px;
  background: var(--bg-card);
  transition: background 0.1s;
}
.file-item:hover { background: var(--bg-input); }
.file-icon  { font-size: 18px; flex-shrink: 0; }
.file-meta  { flex: 1; overflow: hidden; }
.file-name  { font-size: 11px; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.file-size  { font-size: 10px; color: var(--text-muted); }
.file-actions { display: flex; gap: 4px; }
.file-btn {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-muted);
  font-size: 13px;
  padding: 3px 6px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.1s;
}
.file-btn:hover { background: var(--bg-input); color: var(--text); }
.file-btn.del:hover { background: var(--red-dim); color: var(--red-light); }

/* ---- MODAL ---- */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
}
.modal-box {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 24px;
  width: 420px;
  max-width: 95vw;
  max-height: 90vh;
  overflow-y: auto;
}
.modal-box h2 { margin-bottom: 14px; font-size: 16px; }
.modal-box h3 { font-size: 13px; color: var(--text-muted); margin-bottom: 6px; }
.net-section  { border-top: 1px solid var(--border); padding-top: 12px; margin-top: 12px; }
.hint         { font-size: 11px; color: var(--text-muted); margin-top: 6px; }

#net-status-block { font-size: 12px; }
.net-row { display: flex; gap: 8px; margin-bottom: 4px; }
.net-key  { color: var(--text-muted); width: 110px; flex-shrink: 0; }
.net-val  { color: var(--text); }

select#wifi-list {
  background: var(--bg-input);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: var(--radius);
  padding: 4px;
  font-size: 12px;
}
select#wifi-list option { padding: 4px; }

input#wifi-password {
  background: var(--bg-input);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: var(--radius);
  padding: 6px 10px;
  font-size: 12px;
  outline: none;
}
input#wifi-password:focus { border-color: var(--red); }

/* ---- HIDDEN ---- */
.hidden { display: none !important; }

/* ---- SCROLLBAR ---- */
::-webkit-scrollbar       { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-dark); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-dim); }

/* ---- RESPONSIVE: hide side panels on narrow screens ---- */
@media (max-width: 900px) {
  #main-layout { grid-template-columns: 1fr; grid-template-rows: auto 1fr auto; }
  #settings-panel, #files-panel { max-height: 200px; overflow-y: auto; }
}
